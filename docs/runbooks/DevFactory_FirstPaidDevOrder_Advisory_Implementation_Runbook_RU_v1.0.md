\# DevFactory • Первый платный DevOrder (Advisory / Implementation)

\*\*Версия:\*\* v1.0  

\*\*Статус:\*\* ACTIVE (Runbook)  

\*\*Создал:\*\* Архитектор Яцков Евгений Анатольевич  

\*\*Доступ имеет:\*\* Архитектор Яцков Евгений Анатольевич  

\*\*Где лежит evidence:\*\* `ops/\_local/evidence/<release\_id>/...` (не в git)



---



\## 0) Зачем этот runbook

Сделать первый платный заказ повторяемым: “взяли → сделали → доказали → отдали”, без магии и без риска потери контроля.



Опора:

\- DevFactory pipeline (Intent → Patch → Checks → Apply → Audit).  

\- Ops доказуемость (RAW/DIGEST/DecisionLog + артефакты evidence).  

\- FlowSec: deny-by-default, advisory-first (никаких опасных apply без явных правил).  

\- ADO: любой платный шаг имеет документальный + операционный след.  



---



\## 1) Коммерческие пакеты (что продаём)



\### 1.1 Advisory (без внедрения)

\*\*Вход:\*\* описание проблемы + логи/скриншоты/файлы (без секретов).  

\*\*Выход:\*\* отчёт “диагноз + план + риски + оценка”, без изменения кода/БД у клиента.  

\*\*DoD:\*\* у клиента есть понятный план внедрения/исправления + чек-лист проверок.



\### 1.2 Implementation (поставка результата)

\*\*Вход:\*\* согласованный scope + доступные материалы (и правовые условия).  

\*\*Выход:\*\* артефакты (патч/код/SQL/runbook) + evidence, применение делает оператор по runbook (или мы — только в строго оговорённой модели).  

\*\*DoD:\*\* checks PASS, есть rollback story, есть evidence pack.



---



\## 2) Intake (обязательный)

1\) Scope (что делаем / что не делаем).  

2\) Точка “истины”: какой стенд/версия/ограничения.  

3\) Данные: логи, openapi.json, schema dump/DDL фрагменты (если надо).  

4\) Запрет: секреты/PII в открытом виде. Если клиент прислал — фиксируем как инцидент и удаляем из пересылки.  

5\) Согласовать формат результата: “patch” или “инструкция” (обычно patch + runbook).



---



\## 3) Создание DevOrder (фиксируем работу как заказ)

(операционно: через DevFactory API/Operator UI)



\*\*Мини-правило:\*\* если DevOrder не создан — работа “не существует” как коммерческий объект.



---



\## 4) Gate C0 перед выдачей результата (обязателен)

Gate C0 = коммерческий фильтр: “всё проходит воспроизводимо, есть доказательства”.



\### 4.1 Собрать ReleaseId из факта (без заглушек)

```powershell

$Base="http://127.0.0.1:8080"

$do = (curl.exe -4 --http1.1 --noproxy 127.0.0.1 -sS "$Base/api/devfactory/orders/recent?limit=1\&include\_result=0" | ConvertFrom-Json).items\[0]

$rid = "c0\_" + $do.dev\_order\_public\_id + "\_" + (Get-Date -Format "yyyyMMdd\_HHmmss")

$rid



